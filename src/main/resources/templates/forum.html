<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4"> <!-- Declaring  XML using-->
 
	<head th:replace="fragments.html :: headerfiles(title=${forum.name})"></head>
	
	<body>
	
		<div th:replace="fragments.html :: topnav"></div>
		 
		<h1 th:text="${forum.name}"></h1>
		<h2 th:text="${forum.description}"></h2>
		<hr>
		 
		<table class="table-striped stretch" border="1" style="text-align:right">
			<thead>
					<tr>
						<th colspan="7">
							<h2>רשימת כל השרשורים</h2>
						</th>	
					</tr>
					<tr>
						<th>שם השרשור</th>
						<th>תקציר</th>
						<th>נוצר על ידי</th>
						<th>מספר צפיות</th>
						<th>מספר תגובות</th>
						<th>הודעה אחרונה על ידי</th>
						<th>פעילות אחרונה</th>
					</tr>
			</thead>
			<tbody>
				<tr th:each="topic : ${topics}">
					<td><a th:href="@{/topic/} + ${topic.topic.id}" th:text="${topic.topic.title}"></a></td>
					<td th:text = "${topic.summary}" style="width:50%;"></td>
					<td><a th:href="@{/user/} + ${topic.topic.user.username}" th:text = "${topic.topic.user.username}"></a></td>
					<td th:text = "${topic.topic.views}"></td>
					<td th:text = "${topic.numberOfPosts}"></td>
					  <td>
					  	<span th:if ="${topic.lastPost == null}">אין תגובות</span>
					  	<span th:unless ="${topic.lastPost == null}">
					  		<a th:href="@{/user/} + ${topic.lastPost.user.username}"
					  			th:text = "${topic.lastPost.user.username}"></a>
					  	</span>
					  </td> 
					  <td>
					  	<span  th:text = "${topic.getLastActivity()}"></span>
					  </td>
				</tr>
			</tbody>
		</table>
		
		<hr>
	
        <a sec:authorize="isAuthenticated()" th:href="@{/topic/newTopic/} + ${forum.id}">צור שרשור חדש</a>

	</body>
</html>