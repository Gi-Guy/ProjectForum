<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4"> <!-- Declaring  XML using-->
<head>
    <meta charset="UTF-8">
    <title>A Topic</title>
    <link rel="stylesheet" type="text/css" href="/webjars/bootstrap/css/bootstrap.min.css" />
    <script type="text/javascript" src="/webjars/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="/webjars/bootstrap/js/bootstrap.min.js"></script>
</head>

<body>

<!-- Each page should have Top section, Mid Section and Footer
	The topic should be in the top of mid sections, then posts and then add new post. -->
	<div class="container text-center">
		<div>
		<!-- This should be the top section -->
			<h1>This is a topic exapmle</h1>
			<hr>
		</div>
	</div>
		
	<div class="container text-right">
	<!-- this should be the Mid section -->
	
	<!-- Topic: Title + Contect -->
	<!-- add user information display -->
	<!-- add dates -->
	<!-- https://getbootstrap.com/docs/5.0/layout/grid/ -->
	<!-- This page is broken, make a new one. -->


	
	<!-- TOPIC -->
	<section class = "row">
		<!-- TITLE -->

			<label class = "col s12">Title</label>
			<p class = "col s12" style="text-align: justify; display:block; white-space:pre-wrap"
			th:text = "${topic.getTitle()}"> Title:</p>
	</section>
		<!-- Topic contect - Left side of the row-->
	<section class = "row">
			<label class = "col s12">Content</label>
			<p class = "col s12" style="text-align: justify; display:block; white-space:pre-wrap"
				th:text = "${topic.getContent()}"> Content:</p>

	</section>
	<!-- END OF TOPIC -->
	
		<!-- Posts -->
	<header class="row">
		<div class="col s12">
			<blockquote class="flow-text right" th:text="|תגובות: | + ${posts.size()}">מספר תגובות</blockquote>
		</div>
	</header>
	
	<!-- displaying all posts -->
	<section class = "row">
		<div class="col s12" th:each = "post: ${posts}">
			<!-- username -->
			<label class = "col s12">:שם משתמש</label>
			<p class = "col s12>" th:text = "${post.getUser().getUsername()}">
				Post author</p>
			<!-- post -->
			<div class="row">
				<p class = "col s12" style="text-align: justify; display:block; white-space:pre-wrap"
				th:text = "${post.getContent()}"> Content</p>
			</div>
		</div>
	</section>
	
	<!-- Reply -->
	<header class="row">
		<div class="col s12">
			<blockquote class="flow-text right">:הוסף תגובה</blockquote>
		</div>
	</header>
		<div class="row flow-text right" sec:authorize="isAuthenticated()">
			<form th:action="@{/topic/} + ${topic.getId()}" method="POST" th:object="${post}">
				<div class="row">
					<div class="input-field col s12">
						<label for="content">תגובתך</label>
						<textarea name="content" class="materialize-textarea" required></textarea>
					</div>
					<input type="hidden" name="id_topic" th:value="${topic.getId()}"/>
				</div>
							<!-- Sumbit button -->
				<div class="from-row py-1">
					<input class="btn btn-primary" type="submit" value="שלח" />
				</div>
			</form>
		</div>
		<div class="row z-depth-1" sec:authorize="!isAuthenticated()">
            <div class="col s12">
                <h3 style="color:blue">התחבר כדי להגיב</h3>
            </div>
        </div>
	</div>
</body>
</html>